# 26.0 - ConfiguraÃ§Ã£o de Monitoramento e Analytics

**Sprint:** Sprint 4 (Semana 12)
**Prioridade:** P0
**Estimativa:** 2 dias
**ParalelizÃ¡vel:** Sim (com 25.0)

---

## ğŸ“‹ DescriÃ§Ã£o

Configura ferramentas de monitoramento de erros (Sentry), analytics de uso (Firebase Analytics) e mÃ©tricas de performance. Essencial para acompanhar saÃºde do app em produÃ§Ã£o e tomar decisÃµes baseadas em dados.

Monitoramento permite identificar problemas proativamente e entender comportamento dos usuÃ¡rios.

---

## ğŸ¯ Objetivos

- [ ] Configurar Sentry para error tracking
- [ ] Configurar Firebase Analytics
- [ ] Definir eventos principais a rastrear
- [ ] Criar dashboards de monitoramento
- [ ] Configurar alertas de crashes
- [ ] Documentar mÃ©tricas

---

## ğŸ“ Subtarefas

### 26.1 - Setup do Sentry
**Estimativa:** M
**Tipo:** Setup

**Comandos:**
```bash
npm install @sentry/react-native
npx @sentry/wizard -i reactNative -p ios android
```

**Arquivos:**
- `sentry.properties`
- `src/config/sentry.ts`

**Checklist:**
- [ ] Sentry instalado
- [ ] DSN configurado
- [ ] Source maps enviando
- [ ] Teste de crash manual

### 26.2 - ConfiguraÃ§Ã£o do Sentry
**Estimativa:** M
**Tipo:** Desenvolvimento

**CÃ³digo:**
```typescript
import * as Sentry from '@sentry/react-native';

Sentry.init({
  dsn: process.env.EXPO_PUBLIC_SENTRY_DSN,
  environment: process.env.EXPO_PUBLIC_ENV,
  tracesSampleRate: 1.0,
  enableAutoSessionTracking: true,
  integrations: [
    new Sentry.ReactNativeTracing({
      tracingOrigins: ['localhost', /^\//],
    }),
  ],
});
```

**Checklist:**
- [ ] Sentry init no App.tsx
- [ ] Environment configurado
- [ ] Breadcrumbs ativos
- [ ] User context setado

### 26.3 - Setup Firebase Analytics
**Estimativa:** M
**Tipo:** Setup

**Comandos:**
```bash
npm install @react-native-firebase/app @react-native-firebase/analytics
```

**Checklist:**
- [ ] Firebase projeto criado
- [ ] GoogleService-Info.plist (iOS)
- [ ] google-services.json (Android)
- [ ] Analytics ativado

### 26.4 - Eventos de Analytics
**Estimativa:** M
**Tipo:** Desenvolvimento

**Eventos Principais:**
```typescript
// Onboarding
analytics().logEvent('onboarding_start');
analytics().logEvent('onboarding_complete');

// AutenticaÃ§Ã£o
analytics().logEvent('sign_up', { method: 'email' });
analytics().logEvent('login', { method: 'email' });

// TransaÃ§Ãµes
analytics().logEvent('transaction_create', {
  type: 'expense',
  amount: 100.50,
});

// Engagement
analytics().logEvent('screen_view', { screen_name: 'Dashboard' });
```

**Checklist:**
- [ ] 15+ eventos definidos
- [ ] Eventos implementados
- [ ] Propriedades customizadas
- [ ] User properties setadas

### 26.5 - Performance Monitoring
**Estimativa:** M
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Sentry Performance ativo
- [ ] Firebase Performance (opcional)
- [ ] Custom traces para API calls
- [ ] Screen load times

### 26.6 - Dashboards de Monitoramento
**Estimativa:** M
**Tipo:** ConfiguraÃ§Ã£o

**Sentry:**
- [ ] Dashboard de crashes
- [ ] Dashboard de performance
- [ ] Alertas configurados

**Firebase:**
- [ ] Dashboard de eventos
- [ ] Dashboard de engagement
- [ ] Funis de conversÃ£o

**Checklist:**
- [ ] Dashboards criados
- [ ] MÃ©tricas priorizadas
- [ ] Acesso compartilhado com equipe

### 26.7 - Alertas e NotificaÃ§Ãµes
**Estimativa:** S
**Tipo:** ConfiguraÃ§Ã£o

**Alertas:**
- Crash rate > 2%
- Error rate > 5%
- API errors > 10%
- P0 errors (immediate)

**Checklist:**
- [ ] Alertas do Sentry configurados
- [ ] Slack/Email integration
- [ ] EscalaÃ§Ã£o definida

### 26.8 - Privacy e GDPR
**Estimativa:** S
**Tipo:** Compliance

**Checklist:**
- [ ] Analytics Ã© opt-in
- [ ] PII nÃ£o rastreada
- [ ] IPs anonimizados
- [ ] Consent management

### 26.9 - DocumentaÃ§Ã£o
**Estimativa:** S
**Tipo:** DocumentaÃ§Ã£o

**Arquivos:**
- `docs/MONITORING.md`
- `docs/ANALYTICS_EVENTS.md`

**Checklist:**
- [ ] Lista de eventos documentada
- [ ] Como adicionar novos eventos
- [ ] Dashboards principais
- [ ] Processo de alerta

---

## ğŸ”— DependÃªncias

**Bloqueia:** 27.0
**Bloqueado por:** 23.0
**Paralelo com:** 25.0

---

## âœ… CritÃ©rios de Sucesso

- [ ] Sentry capturando crashes
- [ ] Firebase Analytics rastreando eventos
- [ ] 15+ eventos implementados
- [ ] Dashboards configurados
- [ ] Alertas funcionando
- [ ] Privacy compliance
- [ ] DocumentaÃ§Ã£o completa
- [ ] Teste de crash no Sentry

---

## ğŸ“š ReferÃªncias

- [PRD - SeÃ§Ã£o 13](../prd.md#13-monitoramento-e-analytics)
- [Sentry React Native](https://docs.sentry.io/platforms/react-native/)
- [Firebase Analytics](https://rnfirebase.io/analytics/usage)

---

## ğŸ·ï¸ Tags

`#monitoring` `#analytics` `#sentry` `#firebase` `#critical`

---

## ğŸ“Œ Notas Importantes

- Sentry free tier: 5k eventos/mÃªs
- Firebase Analytics Ã© gratuito
- NÃ£o rastrear PII (emails, nomes completos)
- Source maps essenciais para stack traces legÃ­veis
- Test crash: Sentry.nativeCrash()
- Eventos devem ter nomes consistentes (snake_case)
- Propriedades customizadas limitadas (max 25)
- Dashboards devem ser revisados semanalmente
- Alertas crÃ­ticos devem acordar alguÃ©m

---

**Criado em:** 2025-11-10
**Atualizado em:** 2025-11-10
**Status:** â³ NÃ£o iniciada
