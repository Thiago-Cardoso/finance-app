# 9.0 - Gerenciamento de Contas

**Sprint:** Sprint 2 (Semana 5)
**Prioridade:** P0
**Estimativa:** 3 dias
**Paraleliz√°vel:** Sim (com 10.0)

---

## üìã Descri√ß√£o

Implementa gerenciamento de contas financeiras (Carteira, Banco Inter, Nubank, etc). Permite criar, editar, desativar contas e visualizar saldo atual. Contas s√£o usadas ao registrar transa√ß√µes.

Usu√°rio deve poder ter at√© 20 contas simult√¢neas. Cada conta tem nome, tipo (corrente, poupan√ßa, cart√£o, dinheiro, investimento), saldo inicial e saldo atual (calculado automaticamente).

---

## üéØ Objetivos

- [ ] Criar CRUD de contas
- [ ] Integrar com API Rails
- [ ] Implementar lista de contas
- [ ] Criar formul√°rio de conta
- [ ] Exibir saldo consolidado
- [ ] Permitir transfer√™ncias entre contas (futuro)

---

## üìù Subtarefas

### 9.1 - Service de Contas
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/services/api/accounts.service.ts`

**Checklist:**
- [ ] getAccounts
- [ ] createAccount
- [ ] updateAccount
- [ ] deleteAccount (soft delete)
- [ ] getAccountBalance
- [ ] Testes unit√°rios

### 9.2 - Modelo e Schema
**Estimativa:** S
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/models/Account.model.ts`
- `src/shared/schemas/account.schema.ts`

**C√≥digo:**
```typescript
export const accountSchema = z.object({
  name: z.string().min(2, 'Nome muito curto'),
  account_type: z.enum(['checking', 'savings', 'credit_card', 'cash', 'investment']),
  initial_balance: z.number(),
  current_balance: z.number().optional(),
});
```

**Checklist:**
- [ ] Interface Account
- [ ] Schema Zod
- [ ] Enum de tipos

### 9.3 - ViewModel de Contas
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/viewModels/useAccount.viewModel.ts`

**Checklist:**
- [ ] CRUD completo
- [ ] C√°lculo de saldo consolidado
- [ ] Loading/error states
- [ ] Testes unit√°rios

### 9.4 - Zustand Accounts Store
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/stores/accountsStore.ts`

**Checklist:**
- [ ] Array de contas
- [ ] A√ß√µes CRUD
- [ ] getTotalBalance
- [ ] Cache

### 9.5 - Lista de Contas
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/accounts/AccountList.view.tsx`
- `src/app/accounts/components/AccountCard.tsx`

**Checklist:**
- [ ] Lista de contas
- [ ] AccountCard com nome, tipo, saldo
- [ ] √çcone por tipo de conta
- [ ] Tap para editar
- [ ] Swipe para desativar
- [ ] Bot√£o adicionar nova conta

### 9.6 - Formul√°rio de Conta
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/accounts/AccountForm.view.tsx`
- `src/app/accounts/components/AccountIconPicker.tsx`

**Checklist:**
- [ ] Campos: nome, tipo, saldo inicial
- [ ] Valida√ß√£o com Zod
- [ ] Seletor de tipo (dropdown)
- [ ] Seletor de √≠cone (opcional)
- [ ] Bot√£o salvar

### 9.7 - Constantes de √çcones
**Estimativa:** S
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/constants/icons.ts`

**C√≥digo:**
```typescript
export const ACCOUNT_ICONS = {
  checking: 'Building',
  savings: 'Piggy Bank',
  credit_card: 'Credit Card',
  cash: 'Wallet',
  investment: 'Trending Up',
};
```

**Checklist:**
- [ ] Mapeamento tipo ‚Üí √≠cone
- [ ] √çcones do Lucide

### 9.8 - Saldo Consolidado
**Estimativa:** S
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/accounts/components/TotalBalanceCard.tsx`

**Checklist:**
- [ ] Card com saldo total
- [ ] Soma de todas as contas ativas
- [ ] Formata√ß√£o BRL

### 9.9 - Testes
**Estimativa:** M
**Tipo:** Teste

**Checklist:**
- [ ] Testes do ViewModel
- [ ] Testes do formul√°rio
- [ ] Testes da lista
- [ ] Cobertura > 80%

---

## üîó Depend√™ncias

**Bloqueia:** 8.0 (transa√ß√µes precisam de contas)
**Bloqueado por:** 7.0, 2.0
**Paralelo com:** 10.0

---

## ‚úÖ Crit√©rios de Sucesso

- [ ] CRUD de contas funcionando
- [ ] Lista exibindo todas as contas
- [ ] Formul√°rio validado
- [ ] Saldo consolidado correto
- [ ] Suporte a at√© 20 contas
- [ ] √çcones por tipo de conta
- [ ] Cobertura de testes: 80%
- [ ] Code review aprovado

---

## üìö Refer√™ncias

- [PRD - RF04](../prd.md#rf04---contas-e-categorias)
- [Tech Spec - 3.2.4](../tech-spec.md#324-contas-accounts)

---

## üè∑Ô∏è Tags

`#accounts` `#crud` `#balance` `#critical`

---

## üìå Notas Importantes

- Saldo atual √© calculado pelo backend (soma de transa√ß√µes)
- Desativar conta (n√£o deletar) se tiver transa√ß√µes
- Transfer√™ncias entre contas √© feature futura (n√£o no MVP)
- √çcones customizados s√£o opcionais
- Limite de 20 contas simult√¢neas
- Validar saldo inicial >= 0

---

**Criado em:** 2025-11-10
**Atualizado em:** 2025-11-10
**Status:** ‚è≥ N√£o iniciada
