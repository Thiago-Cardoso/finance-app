# 12.0 - Sistema de Or√ßamentos

**Sprint:** Sprint 3 (Semanas 6-7)
**Prioridade:** P1
**Estimativa:** 4 dias
**Paraleliz√°vel:** N√£o

---

## üìã Descri√ß√£o

Implementa sistema de or√ßamentos mensais por categoria. Permite definir limite mensal, visualizar progresso (% usado), receber alertas quando atingir 80% e 100%, e acompanhar hist√≥rico de or√ßamentos.

Or√ßamentos ajudam no controle de gastos e planejamento financeiro. Devem ter feedback visual claro (verde/amarelo/vermelho) e notifica√ß√µes discretas.

---

## üéØ Objetivos

- [ ] Criar CRUD de or√ßamentos
- [ ] Integrar com API Rails
- [ ] Exibir progresso visual (barra)
- [ ] Implementar alertas (80%, 100%)
- [ ] Criar tela de hist√≥rico
- [ ] Mostrar or√ßamentos no Dashboard

---

## üìù Subtarefas

### 12.1 - Service de Or√ßamentos
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/services/api/budgets.service.ts`

**Checklist:**
- [ ] getBudgets
- [ ] createBudget
- [ ] updateBudget
- [ ] deleteBudget
- [ ] getCurrentBudgets
- [ ] getBudgetAlerts
- [ ] Testes unit√°rios

### 12.2 - Modelo e Schema
**Estimativa:** S
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/models/Budget.model.ts`
- `src/shared/schemas/budget.schema.ts`

**C√≥digo:**
```typescript
export const budgetSchema = z.object({
  category_id: z.number(),
  limit_amount: z.number().positive('Valor deve ser positivo'),
  period_start: z.string(),
  period_end: z.string(),
  alert_threshold: z.number().min(0).max(100).optional(),
});
```

**Checklist:**
- [ ] Interface Budget
- [ ] Schema Zod
- [ ] Campos calculados (spent, remaining, percentage)

### 12.3 - ViewModel de Or√ßamentos
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/viewModels/useBudget.viewModel.ts`

**Checklist:**
- [ ] CRUD completo
- [ ] C√°lculo de progresso
- [ ] Alertas
- [ ] Loading/error states
- [ ] Testes unit√°rios

### 12.4 - Zustand Budgets Store
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/stores/budgetsStore.ts`

**Checklist:**
- [ ] Array de budgets
- [ ] A√ß√µes CRUD
- [ ] Filtro por per√≠odo
- [ ] Cache

### 12.5 - Lista de Or√ßamentos
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/budgets/BudgetList.view.tsx`
- `src/app/budgets/components/BudgetProgressBar.tsx`

**Checklist:**
- [ ] Lista de or√ßamentos
- [ ] BudgetProgressBar colorida
- [ ] Cores: verde (< 70%), amarelo (70-99%), vermelho (>= 100%)
- [ ] Percentual e valores
- [ ] Tap para editar
- [ ] Bot√£o adicionar or√ßamento

### 12.6 - Formul√°rio de Or√ßamento
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/budgets/BudgetForm.view.tsx`

**Checklist:**
- [ ] Campos: categoria, valor limite, per√≠odo
- [ ] Valida√ß√£o com Zod
- [ ] Seletor de categoria
- [ ] MoneyInput para valor
- [ ] Per√≠odo padr√£o: m√™s atual
- [ ] Campo de threshold opcional (padr√£o 80%)
- [ ] Bot√£o salvar

### 12.7 - Tela de Detalhe
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/budgets/BudgetDetail.view.tsx`

**Checklist:**
- [ ] Exibir todos os dados do or√ßamento
- [ ] Gr√°fico de progresso (gauge ou barra)
- [ ] Lista de transa√ß√µes da categoria
- [ ] Bot√µes editar/deletar

### 12.8 - Componente de Alerta
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/budgets/components/BudgetAlert.tsx`

**Checklist:**
- [ ] Alert discreto
- [ ] Exibir quando atingir threshold
- [ ] Op√ß√£o de dispensar
- [ ] Integra√ß√£o com notifica√ß√µes

### 12.9 - Or√ßamentos no Dashboard
**Estimativa:** S
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Se√ß√£o no Dashboard
- [ ] Mostrar 3 or√ßamentos principais
- [ ] Link para lista completa

### 12.10 - Testes
**Estimativa:** M
**Tipo:** Teste

**Checklist:**
- [ ] Testes do ViewModel
- [ ] Testes do formul√°rio
- [ ] Testes da lista
- [ ] Testes de c√°lculo de progresso
- [ ] Cobertura > 80%

---

## üîó Depend√™ncias

**Bloqueia:** 13.0, 16.0
**Bloqueado por:** 8.0, 10.0
**Paralelo com:** Nenhuma

---

## ‚úÖ Crit√©rios de Sucesso

- [ ] CRUD de or√ßamentos funcionando
- [ ] Progresso calculado corretamente
- [ ] Cores visuais claras (verde/amarelo/vermelho)
- [ ] Alertas funcionando (80%, 100%)
- [ ] Or√ßamentos vis√≠veis no Dashboard
- [ ] Hist√≥rico de meses anteriores
- [ ] Cobertura de testes: 80%
- [ ] Code review aprovado

---

## üìö Refer√™ncias

- [PRD - RF05](../prd.md#rf05---or√ßamentos)
- [Tech Spec - 3.2.6](../tech-spec.md#326-or√ßamentos-budgets)

---

## üè∑Ô∏è Tags

`#budgets` `#planning` `#alerts` `#high-priority`

---

## üìå Notas Importantes

- Per√≠odo padr√£o: primeiro dia ao √∫ltimo dia do m√™s
- Spent_amount calculado pelo backend (soma de transa√ß√µes)
- Alertas devem ser discretos (n√£o modais intrusivos)
- Permitir m√∫ltiplos or√ßamentos (por categoria)
- N√£o permitir valores negativos
- Threshold padr√£o: 80%
- Cores acess√≠veis (contraste WCAG AA)

---

**Criado em:** 2025-11-10
**Atualizado em:** 2025-11-10
**Status:** ‚è≥ N√£o iniciada
