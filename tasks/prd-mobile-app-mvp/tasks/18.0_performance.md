# 18.0 - Otimiza√ß√£o de Performance

**Sprint:** Sprint 3 (Semana 9)
**Prioridade:** P1
**Estimativa:** 3 dias
**Paraleliz√°vel:** Sim

---

## üìã Descri√ß√£o

Otimiza performance do app para atingir m√©tricas do PRD: < 3s de inicializa√ß√£o, < 2s para carregar dashboard, 60 FPS em anima√ß√µes, < 50 MB de tamanho do app e < 200 MB de uso de mem√≥ria.

Performance √© cr√≠tica para UX. Foco em lazy loading, memoiza√ß√£o, otimiza√ß√£o de listas e redu√ß√£o de bundle size.

---

## üéØ Objetivos

- [ ] Otimizar tempo de inicializa√ß√£o (< 3s)
- [ ] Melhorar carregamento do Dashboard (< 2s)
- [ ] Garantir 60 FPS em scrolls e anima√ß√µes
- [ ] Reduzir tamanho do app (< 50 MB)
- [ ] Otimizar uso de mem√≥ria (< 200 MB)
- [ ] Implementar lazy loading

---

## üìù Subtarefas

### 18.1 - An√°lise de Performance Baseline
**Estimativa:** S
**Tipo:** QA

**Ferramentas:**
- React Native Performance Monitor
- Flipper
- Xcode Instruments / Android Profiler

**Checklist:**
- [ ] Medir tempo de inicializa√ß√£o
- [ ] Medir tempo de carregamento do Dashboard
- [ ] Medir FPS em listas
- [ ] Medir tamanho do bundle
- [ ] Medir uso de mem√≥ria
- [ ] Documentar baseline

### 18.2 - Otimiza√ß√£o de Listas
**Estimativa:** M
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Usar FlatList com keyExtractor
- [ ] Implementar getItemLayout
- [ ] Adicionar initialNumToRender
- [ ] Usar maxToRenderPerBatch
- [ ] Adicionar windowSize apropriado
- [ ] Memoizar renderItem

### 18.3 - Memoiza√ß√£o de Componentes
**Estimativa:** M
**Tipo:** Desenvolvimento

**C√≥digo:**
```typescript
import { memo } from 'react';

export const TransactionItem = memo(({ transaction }: Props) => {
  // ...
}, (prevProps, nextProps) => {
  return prevProps.transaction.id === nextProps.transaction.id;
});
```

**Checklist:**
- [ ] Memoizar componentes de lista
- [ ] Memoizar componentes pesados
- [ ] Usar useMemo para c√°lculos
- [ ] Usar useCallback para fun√ß√µes

### 18.4 - Lazy Loading de Telas
**Estimativa:** M
**Tipo:** Desenvolvimento

**C√≥digo:**
```typescript
import { lazy, Suspense } from 'react';

const Reports = lazy(() => import('@/app/reports/Reports.view'));

function ReportsScreen() {
  return (
    <Suspense fallback={<Skeleton />}>
      <Reports />
    </Suspense>
  );
}
```

**Checklist:**
- [ ] Lazy load de telas secund√°rias
- [ ] Suspense com skeleton
- [ ] Code splitting

### 18.5 - Otimiza√ß√£o de Imagens
**Estimativa:** S
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Comprimir imagens (< 100KB cada)
- [ ] Usar WebP quando poss√≠vel
- [ ] Lazy load de imagens
- [ ] Cache de imagens

### 18.6 - Redu√ß√£o de Bundle Size
**Estimativa:** M
**Tipo:** Desenvolvimento

**Comandos:**
```bash
npx react-native-bundle-visualizer
```

**Checklist:**
- [ ] Analisar bundle com visualizer
- [ ] Remover depend√™ncias n√£o usadas
- [ ] Tree shaking configurado
- [ ] Minifica√ß√£o em produ√ß√£o
- [ ] Usar imports espec√≠ficos (ex: lucide-react-native/icons/Home)

### 18.7 - Otimiza√ß√£o de Gr√°ficos
**Estimativa:** M
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Limitar pontos de dados (max 50)
- [ ] Memoizar componentes de gr√°fico
- [ ] Usar shouldAnimateOnUpdate: false
- [ ] Debounce de re-renders

### 18.8 - Otimiza√ß√£o de API Calls
**Estimativa:** M
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Cache de requests (5 min TTL)
- [ ] Debounce de buscas
- [ ] Cancel requests ao desmontar
- [ ] Pagina√ß√£o eficiente

### 18.9 - Splash Screen Otimizada
**Estimativa:** S
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Splash screen nativa
- [ ] Ocultar quando app pronto
- [ ] Transi√ß√£o suave

### 18.10 - Testes de Performance
**Estimativa:** M
**Tipo:** QA

**Checklist:**
- [ ] Benchmark de inicializa√ß√£o
- [ ] Benchmark de Dashboard
- [ ] FPS em listas longas
- [ ] Uso de mem√≥ria ap√≥s uso prolongado
- [ ] Tamanho do APK/IPA

---

## üîó Depend√™ncias

**Bloqueia:** Nenhuma
**Bloqueado por:** 8.0, 13.0
**Paralelo com:** 17.0, 19.0

---

## ‚úÖ Crit√©rios de Sucesso

- [ ] Inicializa√ß√£o < 3 segundos
- [ ] Dashboard carrega em < 2 segundos
- [ ] 60 FPS em scrolls e anima√ß√µes
- [ ] Tamanho do app < 50 MB
- [ ] Uso de mem√≥ria < 200 MB
- [ ] Benchmark documentado
- [ ] Code review aprovado

---

## üìö Refer√™ncias

- [PRD - Se√ß√£o 6.1](../prd.md#61-performance)
- [RN Performance](https://reactnative.dev/docs/performance)
- [Flipper](https://fbflipper.com/)

---

## üè∑Ô∏è Tags

`#performance` `#optimization` `#speed` `#high-priority`

---

## üìå Notas Importantes

- Medir antes e depois de otimiza√ß√µes
- Usar Flipper para profiling
- FlatList > ScrollView para listas
- Memoizar componentes de lista
- Lazy load telas secund√°rias
- Comprimir imagens
- Cache de API com TTL
- Testar em dispositivos low-end (Android)
- Benchmark deve ser reproduz√≠vel

---

**Criado em:** 2025-11-10
**Atualizado em:** 2025-11-10
**Status:** ‚è≥ N√£o iniciada
