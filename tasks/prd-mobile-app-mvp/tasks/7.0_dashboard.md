# 7.0 - Tela de Dashboard

**Sprint:** Sprint 2 (Semanas 4-5)
**Prioridade:** P0
**Estimativa:** 4 dias
**ParalelizÃ¡vel:** NÃ£o

---

## ğŸ“‹ DescriÃ§Ã£o

Implementa a tela de Dashboard, coraÃ§Ã£o do aplicativo, exibindo saldo consolidado, resumo mensal, grÃ¡fico de despesas por categoria, Ãºltimas transaÃ§Ãµes e progresso de orÃ§amentos. Integra-se com o endpoint `/api/v1/dashboard` da API Rails para buscar dados consolidados.

O Dashboard deve carregar em < 2 segundos, com pull-to-refresh e skeleton loaders durante carregamento. Ã‰ a primeira tela que o usuÃ¡rio vÃª apÃ³s login, entÃ£o precisa ser rÃ¡pida e informativa.

---

## ğŸ¯ Objetivos

- [x] Criar tela de Dashboard responsiva
- [x] Integrar com endpoint da API
- [x] Implementar pull-to-refresh
- [x] Criar componentes de cards (resumo, grÃ¡fico, lista)
- [x] Adicionar skeleton loaders
- [x] Garantir performance (< 2s de carregamento)

---

## ğŸ“ Subtarefas

### 7.1 - Service de Dashboard
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/services/api/dashboard.service.ts`

**CÃ³digo:**
```typescript
export async function getDashboardData(period?: string) {
  const response = await apiClient.get('/api/v1/dashboard', {
    params: { period: period || 'this_month' }
  });
  return response.data.data;
}
```

**Checklist:**
- [x] Service de dashboard criado
- [x] ParÃ¢metros de perÃ­odo
- [x] Tratamento de erros
- [ ] Testes unitÃ¡rios

### 7.2 - ViewModel de Dashboard
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/viewModels/useDashboard.viewModel.ts`

**CÃ³digo:**
```typescript
export function useDashboardViewModel() {
  const [data, setData] = useState(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);

  async function loadDashboard(refresh = false) {
    try {
      if (!refresh) setIsLoading(true);
      const dashboardData = await getDashboardData();
      setData(dashboardData);
    } catch (err) {
      setError(err.message);
    } finally {
      setIsLoading(false);
    }
  }

  useEffect(() => {
    loadDashboard();
  }, []);

  return { data, isLoading, error, loadDashboard };
}
```

**Checklist:**
- [x] ViewModel implementado
- [x] Loading state
- [x] Error handling
- [x] Refresh function
- [ ] Testes unitÃ¡rios

### 7.3 - Componente SummaryCard
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/dashboard/components/SummaryCard.tsx`

**Checklist:**
- [x] Card com saldo total
- [x] Receitas, despesas e saldo lÃ­quido
- [x] FormataÃ§Ã£o de moeda BRL
- [x] Skeleton loader

### 7.4 - Componente ExpenseChart
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/dashboard/components/ExpenseChart.tsx`

**Comandos:**
```bash
npm install victory-native
```

**Checklist:**
- [x] GrÃ¡fico de pizza (VictoryPie)
- [x] Cores por categoria
- [x] Legendas
- [x] Responsivo

### 7.5 - Componente BudgetProgress
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/dashboard/components/BudgetProgress.tsx`

**Checklist:**
- [x] Barra de progresso
- [x] Percentual usado
- [x] Cores (verde/amarelo/vermelho)
- [x] Skeleton loader

### 7.6 - Componente RecentTransactionsList
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/dashboard/components/RecentTransactionsList.tsx`

**Checklist:**
- [x] Lista das Ãºltimas 5 transaÃ§Ãµes
- [x] Ãcone por categoria
- [x] Valor colorido (verde receita, vermelho despesa)
- [x] Link para lista completa

### 7.7 - Tela Dashboard.view
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/dashboard/Dashboard.view.tsx`

**Checklist:**
- [x] Integrar todos os componentes
- [x] Pull-to-refresh implementado
- [x] Skeleton durante loading
- [x] Error state
- [x] Empty state

### 7.8 - Pull-to-Refresh
**Estimativa:** S
**Tipo:** Desenvolvimento

**Checklist:**
- [x] RefreshControl do RN
- [x] Refresh sem recarregar tela toda
- [x] Feedback visual

### 7.9 - Testes
**Estimativa:** M
**Tipo:** Teste

**Checklist:**
- [ ] Testes do ViewModel
- [ ] Testes dos componentes
- [ ] Mock do dashboard service
- [ ] Cobertura > 80%

---

## ğŸ”— DependÃªncias

**Bloqueia:** 8.0, 12.0, 13.0
**Bloqueado por:** 4.0, 2.0
**Paralelo com:** Nenhuma

---

## âœ… CritÃ©rios de Sucesso

- [x] Dashboard carrega em < 2 segundos
- [x] Todos os cards exibindo dados corretos
- [x] GrÃ¡fico de pizza renderizando
- [x] Pull-to-refresh funcionando
- [x] Skeleton loaders suaves
- [x] Tratamento de erros robusto
- [ ] Cobertura de testes: 80%
- [ ] Code review aprovado

---

## ğŸ“š ReferÃªncias

- [PRD - RF02](../prd.md#rf02---dashboard-principal)
- [Tech Spec - 3.2.2](../tech-spec.md#322-dashboard)
- [Victory Native](https://commerce.nearform.com/open-source/victory-native/)

---

## ğŸ·ï¸ Tags

`#dashboard` `#charts` `#performance` `#critical`

---

## ğŸ“Œ Notas Importantes

- Cache de dados por 5 minutos
- Skeleton loaders devem ter animaÃ§Ã£o pulse
- GrÃ¡fico deve ser interativo (tap para detalhes)
- FormataÃ§Ã£o de moeda: usar Intl.NumberFormat
- Testar com diferentes quantidades de dados
- Empty state quando nÃ£o hÃ¡ transaÃ§Ãµes

---

**Criado em:** 2025-11-10
**Atualizado em:** 2025-11-17
**Status:** âœ… ConcluÃ­da (testes pendentes)
