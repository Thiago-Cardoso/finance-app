# 14.0 - Filtros e Busca Avan√ßada

**Sprint:** Sprint 3 (Semana 7)
**Prioridade:** P1
**Estimativa:** 3 dias
**Paraleliz√°vel:** Sim

---

## üìã Descri√ß√£o

Implementa sistema de filtros e busca avan√ßada para transa√ß√µes. Permite filtrar por per√≠odo, tipo, categoria, conta, faixa de valor e buscar por descri√ß√£o. Inclui UI de filtros com bottom sheet e chips de filtros ativos.

Filtros avan√ßados facilitam encontrar transa√ß√µes espec√≠ficas rapidamente. Devem ser intuitivos e persistir durante a sess√£o.

---

## üéØ Objetivos

- [ ] Criar componente de filtros avan√ßados
- [ ] Implementar busca por texto
- [ ] Adicionar filtros por categoria, conta, tipo
- [ ] Permitir filtro por faixa de valor
- [ ] Mostrar filtros ativos como chips
- [ ] Persistir filtros durante sess√£o

---

## üìù Subtarefas

### 14.1 - SearchBar Component
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/components/ui/SearchBar/SearchBar.tsx`

**Checklist:**
- [ ] Input de busca
- [ ] √çcone de busca
- [ ] Bot√£o limpar
- [ ] Debounce de 300ms
- [ ] Feedback visual

### 14.2 - FilterSheet Component
**Estimativa:** L
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/transactions/components/FilterSheet.tsx`

**Checklist:**
- [ ] BottomSheet com todos os filtros
- [ ] Filtro de tipo (receita/despesa/todos)
- [ ] Filtro de categoria (multi-select)
- [ ] Filtro de conta (multi-select)
- [ ] Filtro de per√≠odo (date range)
- [ ] Filtro de valor (min/max)
- [ ] Bot√µes aplicar/limpar

### 14.3 - ActiveFilters Component
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/app/transactions/components/ActiveFilters.tsx`

**Checklist:**
- [ ] Chips de filtros ativos
- [ ] X para remover filtro individual
- [ ] Bot√£o limpar todos
- [ ] Scroll horizontal

### 14.4 - Hook useFilters
**Estimativa:** M
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/hooks/useFilters.ts`

**C√≥digo:**
```typescript
export function useFilters() {
  const [filters, setFilters] = useState<TransactionFilters>({});

  function addFilter(key: string, value: any) {
    setFilters(prev => ({ ...prev, [key]: value }));
  }

  function removeFilter(key: string) {
    setFilters(prev => {
      const newFilters = { ...prev };
      delete newFilters[key];
      return newFilters;
    });
  }

  function clearFilters() {
    setFilters({});
  }

  return { filters, addFilter, removeFilter, clearFilters };
}
```

**Checklist:**
- [ ] Gerenciamento de filtros
- [ ] Adicionar/remover filtros
- [ ] Limpar todos
- [ ] Testes unit√°rios

### 14.5 - Integra√ß√£o com TransactionList
**Estimativa:** M
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] SearchBar no topo da lista
- [ ] Bot√£o de filtros
- [ ] ActiveFilters abaixo da SearchBar
- [ ] Aplicar filtros na API
- [ ] Loading durante busca

### 14.6 - Busca com Debounce
**Estimativa:** S
**Tipo:** Desenvolvimento

**Arquivos:**
- `src/shared/hooks/useDebounce.ts`

**C√≥digo:**
```typescript
export function useDebounce<T>(value: T, delay: number = 300): T {
  const [debouncedValue, setDebouncedValue] = useState<T>(value);

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value);
    }, delay);

    return () => {
      clearTimeout(handler);
    };
  }, [value, delay]);

  return debouncedValue;
}
```

**Checklist:**
- [ ] Hook useDebounce
- [ ] Delay configur√°vel
- [ ] Cancelamento ao desmontar

### 14.7 - Persist√™ncia de Filtros
**Estimativa:** S
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Salvar filtros no store
- [ ] Limpar ao fazer logout
- [ ] Manter durante sess√£o

### 14.8 - Empty State para Busca
**Estimativa:** S
**Tipo:** Desenvolvimento

**Checklist:**
- [ ] Mensagem "Nenhum resultado encontrado"
- [ ] Sugest√£o de alterar filtros
- [ ] Bot√£o limpar filtros

### 14.9 - Testes
**Estimativa:** M
**Tipo:** Teste

**Checklist:**
- [ ] Testes do useFilters
- [ ] Testes do useDebounce
- [ ] Testes dos componentes
- [ ] Cobertura > 80%

---

## üîó Depend√™ncias

**Bloqueia:** Nenhuma
**Bloqueado por:** 8.0
**Paralelo com:** 12.0, 13.0

---

## ‚úÖ Crit√©rios de Sucesso

- [ ] Busca por texto funcionando
- [ ] Filtros aplicando corretamente
- [ ] Chips de filtros ativos vis√≠veis
- [ ] Debounce impedindo requisi√ß√µes excessivas
- [ ] Empty state para sem resultados
- [ ] Filtros persistindo durante sess√£o
- [ ] Cobertura de testes: 80%
- [ ] Code review aprovado

---

## üìö Refer√™ncias

- [PRD - RF06.4](../prd.md#rf06---relat√≥rios-b√°sicos)
- [Tech Spec - 3.2.3](../tech-spec.md#323-transa√ß√µes)

---

## üè∑Ô∏è Tags

`#filters` `#search` `#ux` `#high-priority`

---

## üìå Notas Importantes

- Debounce de 300ms para busca
- M√°ximo de 5 filtros simult√¢neos (UX)
- Validar datas (in√≠cio <= fim)
- Validar valores (m√≠nimo <= m√°ximo)
- Chips devem ter scroll horizontal
- BottomSheet com drag gesture
- Testar performance com muitos filtros

---

**Criado em:** 2025-11-10
**Atualizado em:** 2025-11-10
**Status:** ‚è≥ N√£o iniciada
